<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />



<link rel="stylesheet" type="text/css"
	href="//cdnjs.cloudflare.com/ajax/libs/uikit/2.24.3/css/uikit.min.css" />
<link rel="stylesheet" type="text/css"
	href="https://cdn.datatables.net/1.10.13/css/dataTables.uikit.min.css" />
<script type="text/javascript" charset="utf8"
	src="http://code.jquery.com/jquery-1.12.4.min.js"></script>
<script type="text/javascript" charset="utf8"
	src="http://cdn.datatables.net/1.10.13/js/jquery.dataTables.js"></script>
<script type="text/javascript" charset="utf8"
	src="http://cdn.datatables.net/plug-ins/1.10.13/api/fnFilterClear.js"></script>
<script type="text/javascript" charset="utf8" src="/js/datatable.js"></script>
<script type="text/javascript" charset="utf8" src="/js/bootstrap.min.js"></script>

<!--/*/ <th:block th:include="headerinc :: head"></th:block> /*/-->

</head>
<body>
	<div class="container">
		<!--/*/ <th:block th:include="header :: header"></th:block> /*/-->
		<div th:if="${not #lists.isEmpty(allData)}">
			<h2>Generated Sequences</h2>
			<div class="pom">
				<form th:action="@{/generateData}" method="post">
					<input type="submit" value="Claim new" />
				</form>
			</div>
			<input id="goButton" type="button" value="GO!" onclick="search();"/>
			<script>
				function search(){
					var e = jQuery.Event( 'keyup', { "which": "13" } );
					$('#dataTable_filter input').trigger(e);
				};
			</script>
			<table id="dataTable" class="table table-striped">
				<thead>
					<tr>
						<th>NO.</th>
						<th>Submitted By</th>
						<th>Purpose</th>
						<th>Date</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="data : ${allData}">
						<td th:text="${#numbers.formatInteger(data.seqNum,5)}">NO.</td>
						<td th:text="${data.username}">Submitted By</td>
						<td th:text="${data.purpose}">Purpose</td>
						<td
							th:text="${#temporals.format(data.date, 'MMMM d yyyy, hh:mm a')}">Date</td>
					</tr>
				</tbody>
			</table>
			<div id="tableInfo"></div>
			<script>
				$(document).ready(
						function() {
							var table = $('#dataTable').DataTable();
							$('#dataTable').on(
									'click',
									'tr',
									function() {
										var name = $('td', this).eq().text();
										console.log(table.row(this).data()[0]);
										$("#sequence").val(
												table.row(this).data()[0]);
										$("#user").val(
												table.row(this).data()[1]);
										$("#date").val(
												table.row(this).data()[3]);
										$("#purpose").val(
												table.row(this).data()[2]);
										$('#DescModal').modal("show");
									});
						});
			</script>

			<div class="modal fade" id="DescModal" role="dialog">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h3 class="modal-title">Document details</h3>

						</div>
						<div class="modal-body">

							<div class="row dataTable">
								<div class="col-md-4">
									<label class="control-label">Sequence is</label>
								</div>
								<div class="col-md-8">
									<input type="text" class="form-control" id="sequence"
										name="sequence" disabled="disabled" />
								</div>
							</div>

							<br />

							<div class="row dataTable">
								<div class="col-md-4">
									<label class="control-label">By User</label>
								</div>
								<div class="col-md-8">
									<input type="text" class="form-control" id="user" name="user"
										disabled="disabled" />
								</div>
							</div>
							<br />
							<div class="row dataTable">
								<div class="col-md-4">
									<label class="control-label">Date created</label>
								</div>
								<div class="col-md-8">
									<input type="text" class="form-control" id="date" name="date"
										disabled="disabled" />
								</div>
							</div>
							<br />
							<div class="row dataTable">
								<div class="col-md-4">
									<label class="control-label">Purpose</label>
								</div>
								<div class="col-md-8">
									<input type="text" class="form-control" id="purpose"
										name="purpose" disabled="disabled" />
								</div>
							</div>
							<br />
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default "
								data-dismiss="modal">OK</button>
						</div>
					</div>
					<!-- /.modal-content -->
				</div>
				<!-- /.modal-dialog -->
			</div>
			<!-- /.modal -->

		</div>
		<div th:if="${#lists.isEmpty(allData)}">
			<h2>There are no generated sequences at this moment</h2>
		</div>

	</div>
</body>

</html>